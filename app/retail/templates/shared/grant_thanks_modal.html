{% comment %}
    Copyright (C) 2019 Gitcoin Core

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published
    by the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.

{% endcomment %}
{% load i18n static %}
<div id="grant-thanks-app" v-cloak>
  <contribution-thanks-modal inline-template>
    <b-modal id="contribution-thanks"
      @hide="handleHide()"
      size="lg"
      center
      hide-header
      hide-footer>
        <div class="mt-3 mb-5 mx-5">
          <div class="mb-5 row justify-content-end">
              <b-button @click="close()" type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <span aria-hidden="true">&times;</span>
              </b-button>
          </div>
          <div class="text-center">
            <h3>Thank you for your contribution to open source!</h3>
            <img class="w-25" src="{% static "v2/images/grants/torchbearer.svg" %}" />
          </div>
          <div class="my-4">
            You've successfully contributed to [[numberOfContributions]] grants:
          </div>
          <hr />
          <div>
            <template v-for="donation in donations">
              <div class="my-3">
                [[donation.grant_title]]<br />
                [[donation.grant_donation_amount]] [[donation.grant_donation_currency]]
                <span v-if="donation.grant_donation_clr_match > 0" class="text-success"> + [[donation.grant_donation_clr_match]] DAI matching</span>
              </div>
            </template>
          </div>
          <hr />
          <div class="mt-2 mb-4 px-1 row justify-content-end">
            <b-button
              class="mt-2 mx-2 col-md-4 col-sm-12"
              variant="outline-primary"
              @click="showSaveAsCollection()"
            >
              Save as Collection
            </b-button>
            <b-button
              class="mt-2 mx-2 col-md-4 col-sm-12"
              variant="primary"
              :href="tweetUrl"
            >
              <i class="fab fa-twitter" aria-hidden="true"></i>
              Share on Twitter
            </b-button>
          </div>
        </div>
    </b-modal>
  </contribution-thanks-modal>
  <create-collection-modal inline-template>
    <b-modal id="create-collection" hide-header hide-footer>
      <template>
        <div class="mt-3 mb-5 mx-5">
          <div class="mb-5 row justify-content-end">
            <b-button @click="close()" type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
              <span aria-hidden="true">&times;</span>
            </b-button>
          </div>
          <div class="mb-3 text-center">
            <h1 class="mb-5 font-bigger-4 font-weight-bold">Save Cart as Collection</h1>
          </div>
          <div class="mb-3">
            <p class="font-subheader">Collection Name.</p>
            <b-form-input v-model="collectionTitle" placeholder="What would your collection be called?"></b-form-input>
          </div>
          <div class="mb-2">
            <p class="font-subheader">Description (Optional)</p>
            <b-form-textarea rows="3" max-rows="6" :state=" collectionDescription.length == 0 ? null : collectionDescription.length < 140" v-model="collectionDescription" placeholder="Short description about your collection"></b-form-textarea>
            <p class="text-right">[[ collectionDescription.length ]]/140</p>
          </div>

          <div class="mb-3" v v-if="collections.length">
            <h2 class="middle-line mb-3"><span class="text-muted font-body">or</span></h2>
            <p class="font-subheader mt-3 mb-0">Save to existing collection</p>
            <b-form-select v-model="selectedCollection" text-field="title" value-field="id" :options="collections" size="md" class="mt-3"></b-form-select>
          </div>

          <b-button
            @click="createCollection()"
            variant="primary"
            :disabled="!isValidCollection"
          >
            Save Collection
          </b-button>
          <br>
        </div>
      </template>
    </b-modal>
  </create-collection-modal>
</div>
